"use strict";(self.webpackChunkquote_cli_01=self.webpackChunkquote_cli_01||[]).push([[894],{8894:(K,h,s)=>{s.r(h),s.d(h,{QuoteDetailModule:()=>V});var l=s(6895),u=s(2510),e=s(4650),f=s(8779),g=s(7009),_=s(2621),p=s(8139),v=s(2327),Z=s(1481),T=s(4726),c=s(7392),m=s(1561),Q=s(2419),b=s(2993);function x(o,n){if(1&o){const t=e.EpF();e.TgZ(0,"div",18)(1,"mat-icon",19),e.NdJ("click",function(){e.CHM(t);const a=e.oxw();return e.KtG(a.onEditHeader())}),e._uU(2,"edit"),e.qZA()()}}function A(o,n){if(1&o&&(e.TgZ(0,"li")(1,"span",14),e._uU(2,"MEDIDAS: "),e.qZA(),e._uU(3),e.qZA()),2&o){const t=e.oxw().$implicit;e.xp6(3),e.lnq("Alto: ",t.medidas_alto," cm, ancho: ",t.medidas_ancho," cm, largo: ",t.medidas_largo," cm")}}function C(o,n){if(1&o&&(e.TgZ(0,"li")(1,"span",14),e._uU(2,"DIAMETRO: "),e.qZA(),e._uU(3),e.qZA()),2&o){const t=e.oxw().$implicit;e.xp6(3),e.hij("",t.medidas_diametro," cm")}}function q(o,n){if(1&o&&(e.TgZ(0,"li")(1,"span",14),e._uU(2,"MEDIDAS: "),e.qZA(),e._uU(3),e.qZA()),2&o){const t=e.oxw().$implicit;e.xp6(3),e.Oqu(t.medidas_omv)}}function w(o,n){if(1&o){const t=e.EpF();e.TgZ(0,"span")(1,"mat-icon",37),e.NdJ("click",function(){e.CHM(t);const a=e.oxw().$implicit,r=e.oxw();return e.KtG(r.onEditItem(a))}),e._uU(2,"edit"),e.qZA(),e.TgZ(3,"mat-icon",19),e.NdJ("click",function(){e.CHM(t);const a=e.oxw().$implicit,r=e.oxw();return e.KtG(r.onDelItem(a))}),e._uU(4,"delete"),e.qZA()()}}function y(o,n){if(1&o){const t=e.EpF();e.TgZ(0,"span")(1,"mat-icon",37),e.NdJ("click",function(){e.CHM(t);const a=e.oxw().$implicit,r=e.oxw();return e.KtG(r.onEditItem(a))}),e._uU(2,"edit"),e.qZA(),e.TgZ(3,"mat-icon",19),e.NdJ("click",function(){e.CHM(t);const a=e.oxw().$implicit,r=e.oxw();return e.KtG(r.onDelItem(a))}),e._uU(4,"delete"),e.qZA()()}}function U(o,n){if(1&o&&(e.TgZ(0,"div")(1,"div",20),e._uU(2),e.qZA(),e.TgZ(3,"div",21)(4,"div",22),e._UZ(5,"img",23),e.qZA(),e.TgZ(6,"div",24)(7,"div",25),e._uU(8,"Descripci\xf3n"),e.qZA(),e.TgZ(9,"ul",26)(10,"li")(11,"span",14),e._uU(12,"MATERIAL: "),e.qZA(),e._uU(13),e.qZA(),e._UZ(14,"div",27),e.YNc(15,A,4,3,"li",28),e.YNc(16,C,4,1,"li",28),e.YNc(17,q,4,1,"li",28),e._UZ(18,"div",27),e.TgZ(19,"li")(20,"span",14),e._uU(21,"\xc1REA DE IMPRESI\xd3N APROXIMADA: "),e.qZA(),e._uU(22),e.qZA(),e._UZ(23,"div",27),e.TgZ(24,"li")(25,"span",14),e._uU(26,"MARCA: "),e.qZA(),e._uU(27),e.qZA(),e._UZ(28,"div",27)(29,"div",27),e.qZA()()(),e.TgZ(30,"div",21)(31,"div",29)(32,"div",25),e._uU(33," Observaci\xf3n "),e.YNc(34,w,5,0,"span",28),e.qZA(),e.TgZ(35,"div",30),e._uU(36),e.qZA()(),e.TgZ(37,"div",31)(38,"div",25),e._uU(39," Informaci\xf3n cotizada "),e.YNc(40,y,5,0,"span",28),e.qZA(),e.TgZ(41,"div",32)(42,"div",33),e._uU(43,"Referencia"),e.qZA(),e.TgZ(44,"div",34),e._uU(45),e.qZA(),e.TgZ(46,"div",33),e._uU(47,"Color"),e.qZA(),e.TgZ(48,"div",34),e._uU(49),e.qZA(),e.TgZ(50,"div",33),e._uU(51,"Opci\xf3n"),e.qZA(),e._UZ(52,"div",33)(53,"div",35)(54,"div",35),e.TgZ(55,"div",33),e._uU(56,"Cantidad"),e.qZA(),e.TgZ(57,"div",36),e._uU(58),e.ALo(59,"number"),e.qZA(),e.TgZ(60,"div",33),e._uU(61,"Precio unitario"),e.qZA(),e.TgZ(62,"div",36),e._uU(63),e.ALo(64,"currency"),e.qZA(),e.TgZ(65,"div",33),e._uU(66,"Sub-total antes IVA"),e.qZA(),e.TgZ(67,"div",36),e._uU(68),e.ALo(69,"currency"),e.qZA(),e.TgZ(70,"div",33),e._uU(71,"TOTAL con IVA"),e.qZA(),e.TgZ(72,"div",36),e._uU(73),e.ALo(74,"currency"),e.qZA()()()()()),2&o){const t=n.$implicit,i=e.oxw();e.xp6(2),e.AsE("",t.familia," - ",t.descripcion_comercial," "),e.xp6(3),e.Q6J("src",i.getImage(t),e.LSH),e.xp6(8),e.Oqu(t.material),e.xp6(2),e.Q6J("ngIf",t.medidas_alto),e.xp6(1),e.Q6J("ngIf",t.medidas_diametro),e.xp6(1),e.Q6J("ngIf",t.medidas_omv),e.xp6(5),e.Oqu(t.area_impresion),e.xp6(5),e.Oqu(t.tecnica_marca_descripcion),e.xp6(7),e.Q6J("ngIf",i.edit),e.xp6(2),e.hij(" ",t.itemTag.notas," "),e.xp6(4),e.Q6J("ngIf",i.edit),e.xp6(5),e.Oqu(t.familia),e.xp6(4),e.Oqu(t.materiales[0].color_nombre),e.xp6(9),e.Oqu(e.lcZ(59,18,t.itemTag.cantidad)),e.xp6(5),e.Oqu(e.lcZ(64,20,t.itemTag.precio)),e.xp6(5),e.Oqu(e.lcZ(69,22,i.getSubTtlXItem(t))),e.xp6(5),e.Oqu(e.lcZ(74,24,i.getTtlXItem(t)))}}function D(o,n){if(1&o){const t=e.EpF();e.TgZ(0,"div",38)(1,"div",39)(2,"input",40),e.NdJ("change",function(a){e.CHM(t);const r=e.oxw();return e.KtG(r.onHideTotal(a))}),e.qZA(),e.TgZ(3,"label",41),e._uU(4,"Ocultar Total"),e.qZA()()()}if(2&o){const t=e.oxw();e.xp6(2),e.Q6J("value",!t.sharedvar.selQuote.hideTotal)}}function I(o,n){if(1&o&&(e.TgZ(0,"div",42)(1,"div"),e._uU(2,"SUBTOTAL:"),e.qZA(),e.TgZ(3,"div",43),e._uU(4),e.ALo(5,"currency"),e.qZA(),e.TgZ(6,"div"),e._uU(7,"IVA:"),e.qZA(),e.TgZ(8,"div",43),e._uU(9),e.ALo(10,"currency"),e.qZA(),e.TgZ(11,"div"),e._uU(12,"TOTAL:"),e.qZA(),e.TgZ(13,"div",43),e._uU(14),e.ALo(15,"currency"),e.qZA()()),2&o){const t=e.oxw();e.xp6(4),e.Oqu(e.lcZ(5,3,t.ttlBruto)),e.xp6(5),e.Oqu(e.lcZ(10,5,t.ttlIva)),e.xp6(5),e.Oqu(e.lcZ(15,7,t.total))}}function N(o,n){if(1&o){const t=e.EpF();e.TgZ(0,"app-cond-quote",45),e.NdJ("status",function(a){e.CHM(t);const r=e.oxw(2);return e.KtG(r.onStatus(a))}),e.qZA()}if(2&o){const t=e.oxw().$implicit,i=e.oxw();e.Q6J("condition",t)("edit",!1)("editView",i.edit)("visible",i.getCondVisible(t))}}function k(o,n){if(1&o&&(e.TgZ(0,"div"),e.YNc(1,N,1,4,"app-cond-quote",44),e.qZA()),2&o){const t=n.$implicit,i=e.oxw();e.xp6(1),e.Q6J("ngIf",i.edit||i.getCondVisible(t))}}function E(o,n){if(1&o){const t=e.EpF();e.TgZ(0,"div",18)(1,"mat-icon",19),e.NdJ("click",function(){e.CHM(t);const a=e.oxw();return e.KtG(a.onEditFooter())}),e._uU(2,"edit"),e.qZA()()}}let J=(()=>{class o{constructor(t,i,a,r){this.mngodb=t,this.dg=i,this.nvg=a,this.sharedvar=r,this.edit=!1,this.onChange=new e.vpe,this.ttlBruto=0,this.ttlIva=0,this.total=0,this.quote_cond_list=[]}ngOnInit(){this.sharedvar.selQuote.status<2&&(this.dg.updatePropResult(this.sharedvar.selQuote,this.sharedvar.defaWishData),this.updateDefault(),this.uppecase()),this.sharedvar.general.quote_condition.length>0&&(this.quote_cond_list=JSON.parse(this.sharedvar.general.quote_condition)),(!this.sharedvar.selQuote.condList||0===this.sharedvar.selQuote.condList.length)&&this.fillCondition(),this.onQitemChange()}updateDefault(){this.sharedvar.selQuote.itemList.forEach(t=>{(!t.itemTag.p_iva||0===t.itemTag.p_iva)&&(t.itemTag.p_iva=this.sharedvar.general.p_iva)})}uppecase(){this.sharedvar.selQuote.agent_name=this.sharedvar.selQuote.agent_name?.toUpperCase(),this.sharedvar.selQuote.agent_city=this.sharedvar.selQuote.agent_city?.toUpperCase(),this.sharedvar.selQuote.client_contact=this.sharedvar.selQuote.client_contact?.toUpperCase(),this.sharedvar.selQuote.client_name=this.sharedvar.selQuote.client_name?.toUpperCase()}fillCondition(){this.quote_cond_list.forEach(t=>{this.sharedvar.selQuote.condList?.push(t.name)})}onHideTotal(t){this.sharedvar.selQuote.hideTotal=t.target.checked}onStatus(t){switch(t.tag){case"visible":this.sharedvar.selQuote.condList||(this.sharedvar.selQuote.condList=[]),this.sharedvar.selQuote.condList.includes(t.name)||this.sharedvar.selQuote.condList.push(t.name);break;case"invisible":if(!this.sharedvar.selQuote.condList)return;const i=this.sharedvar.selQuote.condList.findIndex(a=>a===t.name);i>-1&&this.sharedvar.selQuote.condList?.splice(i,1)}}getCondVisible(t){return!this.sharedvar.selQuote.condList||0===this.sharedvar.selQuote.condList.length||this.sharedvar.selQuote.condList.findIndex(i=>i===t.name)>-1}getImage(t){return t.materiales[0].imagenes.length>0&&t.materiales[0].imagenes[0].imagen.file_sm?t.materiales[0].imagenes[0].imagen.file_sm:t.imagen.imagen.file_sm}getSubTtlXItem(t){return t.itemTag.cantidad*t.itemTag.precio}getTtlXItem(t){return t.itemTag.cantidad*t.itemTag.precio+t.itemTag.cantidad*t.itemTag.precio*t.itemTag.p_iva/100}onEditHeader(){this.dg.aDefault({title:"Editar encabezado",value:this.sharedvar.selQuote,schema:{controls:[{name:"client_name",label:"Nombre de la empresa:",type:"text",style:"w-full",validators:{required:!0}},{name:"client_contact",label:"Dirigido a:",type:"text",style:"w-full",validators:{}},{name:"client_email",label:"Correo destino:",type:"text",style:"w-full",validators:{required:!0}}]}}).subscribe(a=>{a&&(this.sharedvar.selQuote.date=(new Date).getTime(),this.dg.updatePropResult(this.sharedvar.selQuote,a),this.onChange.emit(this.sharedvar.selQuote))})}onEditItem(t){this.dg.aQuoteEdit({title:"Editar item",dgheigth:475,value:t}).subscribe(a=>{a&&(this.dg.updatePropResult(t,a),this.onQitemChange(),this.onChange.emit(this.sharedvar.selQuote))})}onEditFooter(){this.dg.aDefault({title:"Editar agente",value:this.sharedvar.defaWishData,schema:{controls:[{name:"agent_name",label:"Nombre del agente:",type:"text",style:"w-full",validators:{required:!0}},{name:"agent_phone",label:"Tel\xe9fono:",type:"text",style:"w-full",validators:{}},{name:"agent_email",label:"Email:",type:"text",validators:{}},{name:"agent_city",label:"Ciudad:",type:"text",validators:{}}]}}).subscribe(a=>{a&&(this.dg.updatePropResult(this.sharedvar.defaWishData,a),this.mngodb.updateDefaData(),this.sharedvar.selQuote.date=new Date(a.strdate).getTime(),this.dg.updatePropResult(this.sharedvar.selQuote,a),this.onChange.emit(this.sharedvar.selQuote))})}onDelItem(t){this.onQitemChange()}onQitemChange(){this.ttlBruto=0,this.total=0,this.ttlIva=0,this.sharedvar.selQuote.itemList.forEach(t=>{this.ttlBruto+=t.itemTag.cantidad*t.itemTag.precio-t.itemTag.descuento,this.ttlIva+=t.itemTag.p_iva*this.ttlBruto/100}),this.total+=this.ttlBruto+this.ttlIva,this.sharedvar.selQuote.total=this.total}onEditCondition(){this.nvg.onRouteDetail("Editar: condiciones Comerciales","","quotedoc",!0)}}return o.\u0275fac=function(t){return new(t||o)(e.Y36(_.r),e.Y36(v.x),e.Y36(Q.$),e.Y36(p.m))},o.\u0275cmp=e.Xpm({type:o,selectors:[["app-qoute-preview"]],inputs:{edit:"edit"},outputs:{onChange:"onChange"},decls:51,vars:20,consts:[[1,"m-4","flex","h-full","w-full","flex-col","items-start"],[1,"w-11/12","text-sm"],[1,"mt-3","h-20","border-b","border-gray-300"],["src","http://omvpublicidad.com/wp-content/themes/omv/core/images/default-logo.png","alt","omvpublicidad",1,"h-16","object-contain"],["class","p-1 h-12 bg-slate-100 w-full",4,"ngIf"],[1,"my-3","text-right"],[1,"mt-4"],[4,"ngFor","ngForOf"],[1,"mt-2","w-full","flex","text-lg","justify-end"],["class","w-36",4,"ngIf"],["class","grid w-72 grid-cols-2",4,"ngIf"],[1,"mt-2"],[1,"border","border-gray-200","bg-slate-100","p-1","text-center","font-medium"],[1,"mt-10"],[1,"font-medium"],[1,"flex","justify-between"],[1,"text-sky-700","underline"],[3,"href"],[1,"p-1","h-12","bg-slate-100","w-full"],["color","warn",3,"click"],[1,"mt-4","border","border-gray-200","bg-gray-50","p-1","text-base","font-medium","text-gray-700"],[1,"flex","flex-row"],[1,"mr-1","mt-2","w-1/2","border","border-gray-200"],["alt","qitem.descripcion_comercial",1,"object-contain",3,"src"],[1,"ml-1","mt-2","h-72","w-1/2","border","border-gray-200"],[1,"h-7","border-b","border-gray-200","bg-gray-50","p-1","font-medium","text-gray-700"],[1,"px-6","list-disc","text-xs"],[1,"h-1"],[4,"ngIf"],[1,"mt-2","h-72","w-1/2","border","border-gray-200"],[1,"p-1"],[1,"ml-2","mt-2","h-72","w-1/2","border","border-gray-200"],[1,"m-2","grid","grid-cols-2"],[1,"border","border-gray-200","bg-slate-100","p-1"],[1,"border","border-gray-200","bg-slate-100","p-1","text-center"],[1,"h-5"],[1,"border","border-gray-200","bg-slate-100","p-1","text-right"],["color","primary",3,"click"],[1,"w-36"],[1,"flex","items-center","mb-4"],["id","default-checkbox","type","checkbox",1,"w-4","h-4","text-blue-600","bg-gray-100","border-gray-300","rounded","focus:ring-blue-500","dark:focus:ring-blue-600","dark:ring-offset-gray-800","focus:ring-2","dark:bg-gray-700","dark:border-gray-600",3,"value","change"],["for","default-checkbox",1,"ml-2","text-sm","font-medium","text-gray-900","dark:text-gray-300"],[1,"grid","w-72","grid-cols-2"],[1,"text-right"],[3,"condition","edit","editView","visible","status",4,"ngIf"],[3,"condition","edit","editView","visible","status"]],template:function(t,i){1&t&&(e.TgZ(0,"div",0)(1,"div",1)(2,"div",2),e._UZ(3,"img",3),e.qZA(),e.YNc(4,x,3,0,"div",4),e.TgZ(5,"div",5),e._uU(6),e.ALo(7,"date"),e._UZ(8,"br"),e._uU(9),e.qZA(),e.TgZ(10,"div"),e._uU(11,"Se\xf1ores: "),e._UZ(12,"br"),e._uU(13),e._UZ(14,"br"),e._uU(15),e.qZA(),e.TgZ(16,"div",6),e._uU(17,"Respetado se\xf1or(a):"),e._UZ(18,"br"),e._uU(19,"De acuerdo a su amable solicitud me permito presentarle la siguiente cotizaci\xf3n:"),e.qZA(),e._UZ(20,"br"),e.YNc(21,U,75,26,"div",7),e.TgZ(22,"div",8),e.YNc(23,D,5,1,"div",9),e.YNc(24,I,16,9,"div",10),e.qZA(),e.TgZ(25,"div",11)(26,"div",12),e._uU(27," CONDICIONES COMERCIALES "),e.qZA(),e.YNc(28,k,2,1,"div",7),e.qZA(),e.TgZ(29,"div",13),e._uU(30," Atentamente,"),e._UZ(31,"br")(32,"br"),e.YNc(33,E,3,0,"div",4),e.TgZ(34,"div",14),e._uU(35),e.qZA(),e._uU(36),e._UZ(37,"br"),e._uU(38),e._UZ(39,"br")(40,"hr"),e.TgZ(41,"div",15)(42,"strong"),e._uU(43),e.qZA(),e.TgZ(44,"div"),e._uU(45),e.qZA(),e.TgZ(46,"div",16)(47,"a",17)(48,"strong"),e._uU(49,"sitio web:"),e.qZA(),e._uU(50," omvpublicidad.com"),e.qZA()()()()()()),2&t&&(e.xp6(4),e.Q6J("ngIf",i.edit),e.xp6(2),e.AsE("",i.sharedvar.general.address,", \xa0 ",e.xi3(7,17,i.sharedvar.selQuote.date,"dd/MM/yyyy"),""),e.xp6(3),e.hij("Cotizacion No ",i.sharedvar.selQuote.consecutive,""),e.xp6(4),e.hij("",i.sharedvar.selQuote.client_name," "),e.xp6(2),e.Oqu(i.sharedvar.selQuote.client_contact),e.xp6(6),e.Q6J("ngForOf",i.sharedvar.selQuote.itemList),e.xp6(2),e.Q6J("ngIf",i.edit),e.xp6(1),e.Q6J("ngIf",!i.sharedvar.selQuote.hideTotal),e.xp6(4),e.Q6J("ngForOf",i.quote_cond_list),e.xp6(5),e.Q6J("ngIf",i.edit),e.xp6(2),e.Oqu(i.sharedvar.selQuote.agent_name),e.xp6(1),e.hij(" Telefono: ",i.sharedvar.selQuote.agent_phone," "),e.xp6(2),e.hij(" Email: ",i.sharedvar.selQuote.agent_email," "),e.xp6(5),e.hij(" ",i.sharedvar.general.name," "),e.xp6(2),e.Oqu(i.sharedvar.general.address),e.xp6(2),e.Q6J("href",i.sharedvar.general.site,e.LSH))},dependencies:[l.sg,l.O5,c.Hw,b.y,l.JJ,l.H9,l.uU]}),o})();const O=["editControlTrigger"];function P(o,n){if(1&o&&e._UZ(0,"img",17),2&o){const t=e.oxw(2);e.Q6J("src",t.getComImage(),e.LSH)}}function M(o,n){if(1&o&&(e.TgZ(0,"div",13),e.YNc(1,P,1,1,"img",14),e.TgZ(2,"div",15)(3,"div",16),e._uU(4),e.qZA()()()),2&o){const t=e.oxw();e.xp6(1),e.Q6J("ngIf",t.sharedvar.selQuote.crome_image),e.xp6(3),e.Oqu(t.sharedvar.selQuote.client_observations)}}const L=[{path:"",component:(()=>{class o{constructor(t,i,a,r,d,G){this.httpq=t,this.snkBar=i,this.mngdb=a,this.sharedvar=r,this.dg=d,this.sanitizer=G,this.total=0,this.ttlIva=0,this.doccss="",this.edit=!1,this.viewNote=!1}ngOnInit(){this.httpq.getCssData().subscribe(t=>{this.doccss=t})}getClicked(t){if(4===t.index){let i=document.getElementById("spanTrigger");i&&(i.style.display="",i.style.position="absolute",i.style.left=t.pageX+5+"px",i.style.top=t.pageY+5+"px",this.editControlTrigger.openMenu())}}onQitemChange(t){this.total=0,this.ttlIva=0,this.sharedvar.selQuote.itemList.forEach(i=>{const a=i.itemTag.cantidad*i.itemTag.precio-i.itemTag.descuento;this.ttlIva+=i.itemTag.p_iva*a/100,this.total+=a+this.ttlIva})}onCotizaWishChange(t){this.setQuote(2)}setDelete(){this.editable()&&this.snkBar.open(`Eliminar: "${this.sharedvar.selQuote.client_name} de la Lista?"`,"Eliminar",{duration:3e3}).onAction().subscribe(t=>{this.setQuote(-1)})}setSend(){if(this.editable())return this.snkBar.open(`\xbfEnviar respuesta al correo: ${this.sharedvar.selQuote.client_email}?`,"Si",{duration:3e3}).onAction().subscribe(t=>{this.sharedvar.selQuote.htmlQuote=this.getSnapshot(),this.setQuote(4)})}setQuote(t){2===t&&this.quoteTaker(this.sharedvar.selQuote),this.editable()&&(this.sharedvar.selQuote.date=(new Date).getTime(),this.sharedvar.selQuote.status=t,this.sharedvar.selQuote._id&&this.httpq.updateQuote(this.sharedvar.selQuote._id,this.sharedvar.selQuote).subscribe({error:i=>console.log(i),complete:()=>{let i="Datos actualizados";switch(t){case 1:i="Creado";break;case 2:i="Tomado";break;case 4:i=`Enviado a: ${this.sharedvar.selQuote.client_email}`}this.snkBar.open(i,"Ok",{duration:1e4})}}))}quoteTaker(t){t.agent_id=this.sharedvar.user._id,t.agent_name=this.sharedvar.user.name,t.agent_phone=this.sharedvar.user.phone,t.agent_city=this.sharedvar.user.city}onEditState(t){this.edit=t}getSnapshot(){let t=document.getElementById("printsection");if(t){let i=`<!DOCTYPE html><html><head><style>\n      ${this.doccss}\n      </style></head></style></head><body>\n      ${t.outerHTML}\n      </body></html>`;return console.log(i),i}return""}onNote(){this.viewNote=!this.viewNote}getNoteIcon(){return this.viewNote?"visibility_off":"visibility"}getNoteText(){return this.viewNote?"Ocultar nota del cliente":"Ver nota del cliente"}editable(){const t=this.sharedvar.selQuote.agent_id==this.sharedvar.user._id&&this.sharedvar.selQuote.status<4;return t||this.snkBar.open('No es posible ejecutar la acci\xf3n: Asegurese de que la cotizaci\xf3n est\xe9 en tr\xe1mite y que usted sea el "Tomador"',"Ok",{duration:3e3}),t}getComImage(){if(this.sharedvar.selQuote.crome_image)return this.sanitizer.bypassSecurityTrustUrl(this.sharedvar.selQuote.crome_image)}onDuplicate(){let i={...this.sharedvar.selQuote};this.dg.aDefault({title:"Duplicar cotizaci\xf3n",value:i,schema:{controls:[{name:"client_name",label:"Nombre de la empresa:",type:"text",style:"w-full",validators:{required:!0}},{name:"client_contact",label:"Dirigido a:",type:"text",style:"w-full",validators:{}},{name:"client_email",label:"Correo destino:",type:"text",style:"w-full",validators:{required:!0}},{name:"client_phone",label:"Tel\xe9fono:",type:"text",validators:{}}]},dgheigth:475}).subscribe(r=>{r&&(this.dg.updatePropResult(i,r),console.log(i),this.quoteTaker(i),i.date=(new Date).getMilliseconds(),i.status=2,delete i._id,this.httpq.createQuote(i).subscribe({next:d=>{console.log(d),this.snkBar.open(`Cotizaci\xf3n duplicada, nuevo consecutivo: "${d.consecutive}"`,"Ok",{duration:1e4})},error(d){console.log(d)}}))})}}return o.\u0275fac=function(t){return new(t||o)(e.Y36(f.v),e.Y36(g.ux),e.Y36(_.r),e.Y36(p.m),e.Y36(v.x),e.Y36(Z.H7))},o.\u0275cmp=e.Xpm({type:o,selectors:[["app-quote-detail"]],viewQuery:function(t,i){if(1&t&&e.Gf(O,5),2&t){let a;e.iGM(a=e.CRH())&&(i.editControlTrigger=a.first)}},decls:47,vars:6,consts:[[1,"flex","flex-col","h-full"],[3,"buttons","onClicked"],["id","spanTrigger",3,"matMenuTriggerFor"],["editControlTrigger","matMenuTrigger"],["class","bg-gray-100 h-80",4,"ngIf"],[1,"flex-1","px-2","overflow-auto"],["id","printsection"],[3,"edit","onChange"],["controlEdit","matMenu"],["mat-menu-item","",3,"click"],["color","primary"],["color","warn"],[1,"mt-2"],[1,"bg-gray-100","h-80"],["class","w-48 h-48 border border-gray-600 m-2 py-1 px-2 rounded shadow-sm",3,"src",4,"ngIf"],[1,"border","border-gray-300","bg-white","h-24","m-2","overflow-auto"],[1,"m-2"],[1,"w-48","h-48","border","border-gray-600","m-2","py-1","px-2","rounded","shadow-sm",3,"src"]],template:function(t,i){if(1&t&&(e.TgZ(0,"div",0)(1,"app-nav-bar",1),e.NdJ("onClicked",function(r){return i.getClicked(r)}),e.qZA(),e._UZ(2,"span",2,3),e.YNc(4,M,5,2,"div",4),e.TgZ(5,"div",5)(6,"div",6)(7,"app-qoute-preview",7),e.NdJ("onChange",function(r){return i.onCotizaWishChange(r)}),e.qZA()()()(),e.TgZ(8,"mat-menu",null,8)(10,"h2"),e._uU(11,"\xa0Cotizaci\xf3n"),e.qZA(),e.TgZ(12,"button",9),e.NdJ("click",function(){return i.setQuote(2)}),e._uU(13," Tomar "),e.TgZ(14,"mat-icon",10),e._uU(15,"done"),e.qZA()(),e.TgZ(16,"button",9),e.NdJ("click",function(){return i.setQuote(1)}),e._uU(17," Liberar "),e.TgZ(18,"mat-icon",10),e._uU(19,"close"),e.qZA()(),e.TgZ(20,"button",9),e.NdJ("click",function(){return i.setSend()}),e._uU(21," Enviar "),e.TgZ(22,"mat-icon",10),e._uU(23,"send"),e.qZA()(),e.TgZ(24,"button",9),e.NdJ("click",function(){return i.onDuplicate()}),e._uU(25," Duplicar "),e.TgZ(26,"mat-icon",10),e._uU(27,"content_copy"),e.qZA()(),e.TgZ(28,"button",9),e.NdJ("click",function(){return i.setDelete()}),e.TgZ(29,"mat-icon",11),e._uU(30,"close"),e.qZA(),e._uU(31," Inhabilitar "),e.qZA(),e._UZ(32,"hr"),e.TgZ(33,"h2",12),e._uU(34,"\xa0Acci\xf3n"),e.qZA(),e.TgZ(35,"button",9),e.NdJ("click",function(){return i.onEditState(!0)}),e._uU(36," Editar "),e.TgZ(37,"mat-icon",10),e._uU(38,"edit"),e.qZA()(),e.TgZ(39,"button",9),e.NdJ("click",function(){return i.onEditState(!1)}),e._uU(40," Vista previa "),e.TgZ(41,"mat-icon",10),e._uU(42,"preview"),e.qZA()(),e.TgZ(43,"button",9),e.NdJ("click",function(){return i.onNote()}),e.TgZ(44,"mat-icon",10),e._uU(45),e.qZA(),e._uU(46),e.qZA()()),2&t){const a=e.MAs(9);e.xp6(1),e.Q6J("buttons","100001"),e.xp6(1),e.Q6J("matMenuTriggerFor",a),e.xp6(2),e.Q6J("ngIf",i.viewNote),e.xp6(3),e.Q6J("edit",i.edit),e.xp6(38),e.Oqu(i.getNoteIcon()),e.xp6(1),e.hij(" ",i.getNoteText()," ")}},dependencies:[l.O5,T.w,c.Hw,m.VK,m.OP,m.p6,J]}),o})()}];let F=(()=>{class o{}return o.\u0275fac=function(t){return new(t||o)},o.\u0275mod=e.oAB({type:o}),o.\u0275inj=e.cJS({imports:[u.Bz.forChild(L),u.Bz]}),o})();var S=s(2469),Y=s(4859),R=s(3159);const B=[];let H=(()=>{class o{}return o.\u0275fac=function(t){return new(t||o)},o.\u0275mod=e.oAB({type:o}),o.\u0275inj=e.cJS({imports:[u.Bz.forChild(B),u.Bz]}),o})();var z=s(2355);let j=(()=>{class o{}return o.\u0275fac=function(t){return new(t||o)},o.\u0275mod=e.oAB({type:o}),o.\u0275inj=e.cJS({imports:[l.ez,H,c.Ps,z.z]}),o})();var $=s(6842);let V=(()=>{class o{}return o.\u0275fac=function(t){return new(t||o)},o.\u0275mod=e.oAB({type:o}),o.\u0275inj=e.cJS({imports:[l.ez,F,S.R,R.x,c.Ps,Y.ot,g.ZX,m.Tx,j,$.N]}),o})()}}]);